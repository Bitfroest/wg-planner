<!doctype html>
<html>
<head>
	<title>Database model</title>
	<style type="text/css">
		.table {
			margin: 20px 10px;
			min-width: 400px;
			width: 400px;
			border-collapse: collapse;
			/*border-bottom: 2px solid black;
			border-top: 2px solid black;*/
			border-left: 5px solid blue;
			border-bottom: 1px solid black;
			border-top: 1px solid black;
			border-right: 1px solid black;
		}

		.table tr:nth-child(1) {
			border-bottom: 2px solid black;
		}

		.table td, .table th {
			padding: 5px 10px;
			text-align: left;
		}

		.table tr td:nth-child(1) {
			width: 150px;
		}

		.table tr td:nth-child(1) {
			font-family: Monospace;
		}

		:target tr:nth-child(1) {
			background-color: lightgreen;
		}
	</style>
</head>
<body>
	<h1>Database model</h1>

	<table id="dbinfo" class="table">
		<tr><th colspan="2">dbinfo</th></tr>
		<tr><td>version</td><td>integer not null</td></tr>
		<tr><td>cookiesecret</td><td>string not null</td></tr>
		<tr><td>sessionsecret</td><td>string not null</td></tr>
	</table>

	<table id="session" class="table">
		<tr><th colspan="2">session</th></tr>
		<tr><td>id</td><td>text identifier</td></tr>
		<tr><td>data</td><td>text not null</td></tr>
		<tr><td>created</td><td>timestamp not null</td></tr>
	</table>
	
	<table id="person" class="table">
		<tr><th colspan="2">person</th></tr>
		<tr><td>id</td><td>identifier</td></tr>
		<tr><td>name</td><td>string not null</td></tr>
		<tr><td>email</td><td>string unique not null</td></tr>
		<tr><td>password</td><td>string not null</td></tr>
		<tr><td>role</td><td>enum{customer, admin} not null</td></tr>
		<tr><td>created</td><td>timestamp not null</td></tr>
	</table>
	
	<table id="household_member" class="table">
		<tr><th colspan="2">household_member</th></tr>
		<tr><td>household_id</td><td>foreign identifier to <a href="#household">household</a></td></tr>
		<tr><td>person_id</td><td>foreign identifier to <a href="#person">person</a></td></tr>
		<tr><td>role</td><td>enum{member, founder} not null</td></tr>
		<tr><td>created</td><td>timestamp not null</td></tr>
	</table>
	
	<table id="household" class="table">
		<tr><th colspan="2">household</th></tr>
		<tr><td>id</td><td>identifier</td></tr>
		<tr><td>name</td><td>text not null</td></tr>
		<tr><td>created</td><td>timestamp not null</td></tr>
	</table>
	
	<table id="shop" class="table">
		<tr><th colspan="2">shop</th></tr>
		<tr><td>id</td><td>identifier</td></tr>
		<tr><td>name</td><td>string</td></tr>
		<tr><td>location</td><td>geo coordinates</td></tr>
	</table>
	
	<table id="shoppinglist" class="table">
		<tr><th colspan="2">shoppinglist</th></tr>
		<tr><td>id</td><td>identifier</td></tr>
		<tr><td>when</td><td>datetime</td></tr>
		<tr><td>where</td><td>foreign identifier to <a href="#shop">shop</a></td></tr>
		<tr><td>group</td><td>foreign identifier to <a href="#group">group</a></td></tr>
		<tr><td>buyer</td><td>foreign identifier to <a href="#person">person</a></td></tr>
		<tr><td>costs</td><td>currency</td></tr>
	</table>
	
	<table id="item" class="table">
		<tr><th colspan="2">item</th></tr>
		<tr><td>id</td><td>identifier</td></tr>
		<tr><td>name</td><td>string</td></tr>
		<tr><td>shoppinglist</td><td>foreign identifier to <a href="#shoppinglist">shoppinglist</a></td></tr>
		<tr><td>owner</td><td>foreign identifier to <a href="#person">person</a></td></tr>
		<tr><td>costs</td><td>currency</td></tr>
		<tr><td>barcode</td><td>string</td></tr>
	</table>
	
	<table id="invitation" class="table">
		<tr><th colspan="2">invitation</th></tr>
		<tr><td>group</td><td>foreign identifier to <a href="#group">group</a></td></tr>
		<tr><td>person</td><td>foreign identifier to <a href="#person">person</a></td></tr>
		<tr><td>created</td><td>datetime</td></tr>
	</table>
</body>
</html>